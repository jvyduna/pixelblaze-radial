{
  "name": "radial firework rocket sparks",
  "id": "FFH5Ge5b4pbP9Z8th",
  "sources": {
    "main": "/* Also mapped. 12 * 144 of SK9822 wired in setions as:\n        0\n     5     x\n   x         1\n  4           x\n   x         2\n    3      x\n        x\n*/\n\nvar arms = 12\nvar pixPerArm = pixPerRadial = pixelCount / arms\nradials = array(arms)\nfor (i = 0; i < arms; i ++) { radials[i] = array(pixPerArm) } \n\n// Arm remap array -> takes physical segment in index order (wired order)\n// and returns the index of segment where 0 is the straight up arm (12 oo clock)\n// and proceeds clockwise. aRa[chunk] = clockPositionHour\nvar aRa = array(arms);\naRa[0] = 0; aRa[1] = 6; aRa[2] = 2; aRa[3] = 8;\naRa[4] = 4; aRa[5] = 10; aRa[6] = 7; aRa[7] = 1; \naRa[8] = 9; aRa[9] = 3; aRa[10] = 11; aRa[11] = 5; \nfunction indexToRadial(index) {\n  segment = floor(index / pixPerArm)\n  return aRa[segment]\n}\n\n// 0, 1/12, 2/12, ..etc.. 11/12 \nfunction indexToUnitRadial(index) {\n  return indexToRadial(index) / arms\n}\n\n// Takes an index, returns # pixels from center\nfunction indexFromCenter(index) {\n  arm = floor(index / pixPerArm)\n  inbound = (arm % 2) == 0\n  pixIntoArm = index % pixPerArm\n  pixFromCenter = inbound ? (pixPerArm - pixIntoArm - 1) : pixIntoArm\n  return pixFromCenter\n}\n\nradialIndex = array(pixelCount)\nfor (i = 0; i < pixelCount; i++) { radialIndex[i] = indexFromCenter(i) }\n\n\n// Takes an index, returns a fraction of an arm's length from center\nfunction indexToUnit(index) {\n  return indexFromCenter / pixPerArm\n}\n\nradialPct = array(pixelCount)\nfor (i = 0; i < pixelCount; i++) { radialPct[i] = indexToUnit(i) }\n\n\n\nexport function beforeRender(delta) {\n  // time() outputs a sawtooth from 0..1. An argument of 0.05 means it takes \n  // 0.04 * 65.536 seconds to progress to 1 before looping back to 0.\n  t1 = time(0.04)\n}\n\nexport function render(index) {\n  index = radialIndex[index]\n  pixelCount = pixPerArm\n\n  canSpark = square(index / pixelCount + t1, 0.35)\n  \n  /*\n    To be a white spark, two things need to be true: This pixel in the canSpark \n    section, and a randomly selected number between 0 and 1 needs to be greater \n    than 0.95 (a 1-in-20 chance)\n  */\n  isSpark = canSpark && random(1) > 0.95\n  \n  // To make a fiery rocket, set up a second square wave that will be 5% of the \n  // strip length, and lead the sparks secion by 5% of the strip length.\n  isFire = square(index / pixelCount + t1 + 0.15, 0.15)\n  \n  /*\n    Now we'll set our hues for the fiery section. We want something between \n    hue 0 (red) and hue 0.2 (yellow).\n\n    You might think, how about making it yellow up front, and the redish portion\n    trails behind, all of it moving along with the rocket. We could do that, but\n    the alternate approach used here sort of simulates fire being expelled from\n    a rocket instead. The red-to-yellow sawtooth gradient is only a function of\n    the pixel's position in the strip. That way, as the rocket moves through \n    space, it leaves a trail behind it instead of keeping the plume with it.\n    \n    The \"%\" is the remainder operation, so we'll get a repeating sequence\n    between 0 and 0.2\n  \n    As you'll see in a second, this hue will be ignored for sparks because \n    sparks will have their saturation set to zero. A zero saturation makes the \n    pixel white no matter what the hue is.\n  */\n  h = (index / (pixelCount / 5)) % .2\n\n  /*\n    Let's put it all together with hsv(hue, saturation, value). \n    \n    The final color of a pixel will be either:\n      - black (because value is zero)\n      - white (because value is high and saturation is zero), or \n      - red-yellow (because value is high and saturation is high)\n      \n    h will always be a hue between red and yellow, even when hue is ignored\n    because the pixel is a spark or off insead.\n    \n    We set the saturation to be the 0-or-1 value of isFire. isFire will be 1 for\n    the fire pixels and 0 for the spark or off pixels. That means we'll have \n    saturated red-yellow colors when isFire is 1, and we'll have desaturated \n    (white) colors for a spark.\n    \n    Finally, for the brightness value, we want this pixel to be bright (1) if \n    it's either a fire pixel or a spark pixel, and fully off (0) otherwise.\n  */\n  hsv(h, isFire, isFire || isSpark)\n}\n"
  },
  "preview": "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCACWAGQDASIAAhEBAxEB/8QAHQAAAgIDAQEBAAAAAAAAAAAAAAcDBAIFBggBCf/EADQQAAICAQQBAwMDAwMDBQAAAAECAxEEAAUSIQYTIjEHFEEjMlFCUmFxgZFiscEVJEOC8P/EABsBAAIDAQEBAAAAAAAAAAAAAAAFAgQGAQMH/8QAMREAAQMCAwUHAwUBAAAAAAAAAQACAwQREiExBRMiQVEUYXGhsdHwFTKBI5HB4fFy/9oADAMBAAIRAxEAPwD89PPPpFPtPqZ2yrJl4jO5OGqlpIF5UKNkuL/3Aq77Olrp5eBfU9PJoU2vPR13b7eYCVE9k9e8nr9rUGJFV7eiLA1L5/8AS3F8iyJ8rbRFh7pJlOXZyRFKOAY2ADR6JsDsk3d2MpTbSmpH9mrxnyd3d/Xx/dMHQCUY4e/JIjRqbNwZ9uynx8mJoJ0rkjij2LB/0IIIP5BvUOtUCCLhUCCDYrOCdsdyyhCSrJ70DimBB6IPdHo/INEUQDq+uPhybG7QDInz0ZZJ7xqjgjBK2JBIbBLR3yQd0AR/VrdT4GdPtefjZmK/pZOPIs0T0DxdSCDR6PYHzrq4p91ScSH1sWHB9OSSAYqAK8RDcirKSX6L0Gez1VnjQveKeVZfimVNkYs5UkK327JzimZWBAccgRQ5EMLN9fDE61UON916EWOJp82WQxiBI7u+ITiQbZiSRVfgdm+p8nGk2qYvGPVi9+P6zxo8bSBAJVQgsrcefTA3RVhxJFQexsjSx4uCpNcWm41Ts23yfD8s8cyZYkZHODlCWGRDSt6ikqGIp6DLdfAZbAutYbn5ft3iOx4azENktt2O2PioCC/GQmrApR18n+DV1Wk1JHLt2VBLKH2xpMUOgxiS5BjIUsC9r6lWbI9r8lUqVBoT5EuVIZJpHlkIALuxY0BQFn+AAP8AbWf+ix47Yjgve38X6efqnH1J25wYeK+q6jzfyXePIBBLlyxnbneT0vsnf7aV1drfixsPT/DBW4shI9wJ0yrn/wDpjkvnCMQKFQIxhON6p5EtfSibjQogsT2CO4xDHBJFktB6cHppMkGYXIyqYI4VkC+0sH/IoKRyLDuD7hJIeEsfJkj4QtHxSjz5EvS2/RYdm+17pQutAxjYmhjBYBJ3OLjc6qDRo0amorOTHlhSJ5I3RJV5xsykB1srY/kWrC/5B/jXf+A/VObYzibduh9bbI2apqLSxWnEfntB/FWB8XQGl7qf/wBrJN/80EXp/wCJGMgT/wCtKX/3UH+ojutUU0VUwxyi4+aL0jkdGcTSnn5B4/tnmmzxlWhklaPChhzoqcxksyGiD2ASbW/kfgiwofLvEc3w/chjZQDxSL6kGQo9sq/+CPyPx/kEEyeP+aZnjuez4yKmBJkpkS4CE8Dxawqs3Jlr4uyehd1p77XvGyfUHZZYYmXMxWXHhyceRSrISfgj8H+GHVjo9azLn1GxnZ8cR8tB+PQ+OjOR0VYLgWf/AJ/a80aNd55t9K8vx9WzNu9TN21Y3kcsR6kIV+JLAVyHwbA67sACzwetPBURVLMcRuPmqWPjdG7C4I1PFNAI1SXH5cfUPqRuVdiVAUG7HFWF0ACbYX8FYNGrC81byI8OOCQwyvM5nKxFhwYRgfudKItrFU5rgwINqdV44GlSVlKARLzbk4UkWB0CfcbI6FmrPwCRJiTQResJ8f11eNlUhyjRv8qw/B7FEEGwSBRpgJnTx4rYyP6cT3zCAKXBKnixHbLaKQpJAIsAEnQhQaNGjQhGjRo0IRqdHebFaJ8rhFDcscLliGdiqtxABAYgAkmrCfN0DBo0IVvEjaBFzRLjqY25RxygSGRlKe0x0eqa/eApCsLJFa2+07jueLuuAm3NlYLTyouBNK0kjJF6rUgCipEMhJYBDbIaFkg6SFuWLkRmSGNfbIA8du7A8eKsFJHTkkEgHj3ZCjUGouaHDC4XC6DbRPrw/wCoeN5dt8uPP6WLui484+3UsfUFq5dbFfl/bZICEnrWm8++l8Ofmy5OzJHi5DTPF9oqhIn4xBxxrpTQI/gkj47JUM7RM4MKOicVBDuGPKhyNgDomyB+AQLNWWR4b9S54GxU37JWTFEsjLlk85VYQcKdVtiDyWmI7PLs98czNs+WjeaiiPW7fmvhr0TaGojmG7qO/PvS3ngkxppIZo2iljYo8bqQysDRBB+CNYa9I+X+EbV57FHM0gScs3oZ2OQ1qYuSg/hkuj/zRFnSD8h8Y3HxfKSDcIPSMi84nVgyyL/II/7GiLFgXphQbTirRh+1/T26qhJC6MX5LVaNGjThV0azggkyZo4YY2llkYIkaKSzMTQAA+SdbLx7xjcfKMp4Nvg9UxrzldmCrGv8kn/sLJo0DWn54h4RtXgUUkyyB5wy+vnZBC0oi5MB+FS7P/Fk0NJ6/acVEMP3P6e/RWI4XSZ8ktNr+jOTlQt93uK4mQhUPEkPqBbRWA5ch3TAH8WPk6NbXc/rFh4G6ZQwcM7jjyFHE5kMVn00UjiVJ6K/OjSnFth9nNFgf+f5z/dM3Chbl4demaUmjTe+oX0jjEU+57EjCQGSabBFceIav0gB1Xzx/wCKoAqSeCTGmkhmjaKaNijxupVlYGiCD8Ea0FJWRVjMcR8RzCUyRujNnLDU+Bk/ZZ+NkXMvpSLJePJ6cgog+16PFv4NGj3WoNGry8lPDDBN6CnI9GR5CsjSofTjT201rbH5awF6AFXdCTNgx4HmjUuk0TLHwDpMjEAiRhIpArkAVABFN+41bVNXkXFXZmkWP1Mv1DHIZZAAini0bRqGDFvZKGJBUBl+CQdCF0niH1G3DxjImyHkTLxGck7bZjW3DkvGFXhGAT2BV8hQNWrcgydi+oexoh9POxicQSQsakia2Ug0bU/uFj5F0SDpD4OVPhyZG1yRYmYsvPHRciYGKCRmS5Y3DhVb9NfffEqO7XX3Zt7y/EtwjycUQ/cq0UocSFwUrl6bcW4kG15A+4FB2pB0jrtmMqDvoThk6jn86q5DUGPhfm1bXzL6fZfi5bJiP3O3O78HFl41D8R6nVDvqx0eviwNHhv0+y/KCuTKfttuR05ubDyKX4n0+qPfVnod/NEaYex+bY/kvj8nrKcXNbEyoyjKRHK4ZHYRsejSsCVux+eqJj37z7D8Y2eGCNlyNzODjBIB2qMHL25HwKo18mx+DYodtrsPZ8H6l7X7uvT86Jp2SmwdpxcN9PmenLVdHPk7F9PNjdB6eDjA5YjhU3JK1qoAs2x/aLPwKsgDSr8j87zPN2ymlDYm1IIhJiQepK0S8kDTmuKOQVVacgfqAAWSw0G9bhuHljZm7zY+RM8UhbInjBMECOf00Ar2e7n8seV/yCTWyJ4tuEmCsGPlBWJkmcAsX9PjSujkFUYsVKmn6LAilF6h2YynO+m4pOp5fOqVzVBk4WZNVCeNYnCrKkwKq3JAQASASvYHYJo/iwaJFEmr+2bTi58DST71g7c4biIslJyxFD3fpxMK7r5vr40aeqmmf4Z9XUysGTE8gnRcokxRZATiHD21vQ4qAQBf/WvVBm10fn305wvLJMnIiVcXdmlZVye+LBY7CsPij8cqsdfIFaQ255BzJ1yDIjGVeokaRvQUEqsdvZpVVa7al4i7BA6rwX6g7j4pCsckD5myRzfqAKbhZ0Ye1vgEgFuJ+eBquzrMVWy3RP7TQHC4cuR8PbRMIqhpGCbMZrlt22bN2PKGPnY7Y8xRZFDEEMrCwQR0R/p+bHyNU9PvJg2Xz3ZUKmPLiIw8YTotSwkuVcKWFqeh+OxXyNK7zP6d7h4hIslNm7e0ayfdxxkKl0Kcd8TZod99V3YF6j2kyc7qXhf06+HtqippDDxMN2n+vdcro0aNOUvV6XdpMlmmnHrZfpx46SOqFFiWIxcShXtuISmsEcb7JBEB9TccqV/0UkfnKwHCFOgWIA6UfBpR/gAfA1Bo0IVjK3HIzJllllPJCfTCAIsYLFqRRQQcmY0oAFnUm5YLYsrOs652OzlVzYlkEcrAKWALqpJHIXY/I/BBMSTQfatG+PcospMjkGyV6YGwVADUBxNvZJAA1Od09PeZc6CLhG8jt6BbgDG1hoyYwntKkqQoUUTQGhdubWVjbmylwAcbLhwWikbKVhlGOSSSMKV65UGUM5QkKSS4BZqXWp1Pk50+bZnf1pGkeZpXAMju1ciz/ub4vsmiSR8m4NC4s58iXJcPNI8rhVQM7EkKoCqO/wAAAAD8ADRrDRoQra4MuThPk42HkNDjKoypwC8aMzEKSQvsBFAAk2Qe+6FeSBokiZihEq814uGIFkdgH2mwejRqj8EEkeRLCkqRyOiSrwkVWIDrYaj/ACLVTX8gfxqxBNLmbkcifhmSlmnl+7lIE1W7Bm5AktR+DyJNDsjQhbvaN4zfFJZDAEgyYI1bIxmkaP8AVjyehNHJ+5gOuMdEKQb6kBdHiXm21ed4b46x8ZlWBJ8LJCnkt0xA/qSzX/FgWL8/4+4p91Jk5iTZk8snKWR5FJdGDCS+aN7zyBD/ANJF0TRHzH3STb1iOC8mJOpDvOrD1OY5gFGADIOLUVs2RZ/ACev2bHWi+jxofdWYp3R5ajomD539JnwwubsMLSY/CR5sTnbRhGI5KSbYHrrs38XdBY6cfiP1Yg3bFbB3gx4mUuLIq5bMAk7luRsUAhr/AGJv46Gr3nv05w/Ic6SbE4YO4SZUylwvskqL1PcB+SwPuHfuN31S6nr5qR/Z64dbO7h6+vVXXUzZ27yDvySO0at7rtGbsea+Jn40mLkITaSCr7IsH4I6PY6OqmtO1wcMTTcJTos8eRYZ45HiSdEYMYpCQrgH9p4kGj8dEH/I1ho0akhGjRq3tW0Zu+ZqYmBjSZWQ5FJGLrsCyfgDsdnoai5waC5xsEaqpo02dp+jWCY5o9wzch8mNlBOMVVBcaNXuUk0WIvq/wCBo0mdtikabXP7Jh2GfmEptGjRp2l6zXIlWB4BI4hdldowx4syghSR+SAzUf8AqP8AOreJ6BwJmGBNlZMXJ5JTIfRjiI4AlFAIYOykMX43QKm+6Os4J2x3LKEJKsnvQOKYEHog90ej8g0RRAOhCkwsdMqZkeT0lEcj8vb2VQsB7mUdkAfN99BjSlgeK+XZ+ybicWdWzdpxVmyI4IcmHIniRQ8fTKRzodn/AKF5gBPld5CxLPIIHeSEMQjyIEZlvolQTRr8Wf8AU6km9NsXHZfRSQco3ROfNqNh2v298uI4n+jsD5bwngjqGFkguF6xyvhdiYbL0fvWx7L9SNpgdpPXxZJmkgy8cgOv6YJAJBq+NFSPx2LApE+V+Ebl4lMDkx+piOR6WVH+xrFgH+01fR/tNWBettsflmV4zI277dktPhLltHkYEiNGkpk5kSBET0obRQAoZiChoFetNjx3yHbPPNksRJKgbEiycPIUPxYMeiD0QasH8/4IIGUtU7FOXHD6Z+R8irzRHVC2jl5x0a7vzb6aT7OZs/bR6+308rQiy8CrIVPz+5R13899/BOjwn6aT7wYc/ch6G30kqwmw86tIFHx+1T3389dfIOtD9Qp9zv8WXnfpbqq/ZZd5u7Z/wB2Wk8U8I3Ly2YnGj9PEQn1cqT9i0LIH9xquh/cLoG9PbZdj2X6b7TO6yehixzLJPl5BBdv0yQCQBdcqCgfnoWTdfyLyHbPA9ksxJEhbLixsOBQnJiw6AHQAuyfx/kkApzyX6h7n5FPkTHKlghyOUT7cByx1iCgITZp3+TZUEFVKkdBc6RU7aOfBD65+Z8grDhHSi2rl0G+fV3Mw96zV23Gxzj81BOR+oxZUVGpo34kWvRBN/N96NLvOzHz8p53HHlQVAzMI0ApUBYk8VUBRZPQGjWgbs2kAA3YNlXdVzuNy5Oj6h/SmLe5MjdNrZcfOKSSy45HsnYP8g/0sQT/AIJq6snSWzMLI2/JfHyoJcbISuUUyFGWxYsHsdHTE8I+rcu3Y8uDvsk+XCyMsOV++RCzAkOSbZfk32R8diqYnlvhu0+cRGVivru7+hnwGzx9IOvx062Lr+CaIu9I4auo2W8U9Zmzk7u+fkL3MTKgF8eueS846NbXyPxjO8Xy4oM1UPqxLNHJGbR1Ivo0Ox8Ef+CCdVrWMe2Roew3BS9zSw4XCxU+Dl/Y5STejDkKthop15I6kUQfyOiewQR8gggER5GRLlzyTzyPNNKxd5JGLM7E2SSfkk/nWGjU1Fb3y5PQ3CSGeb7jOWQmSQxemVjMcfpxFQxVGT3IY1UBCCvJgAFq7HuOTt2bjz4GMHzcb1ZllQOXACXZANUgUv8AFfPLkvWqc2T6+LjxsZnkh5KpeTkixk8gqrXt9xcnujy+B2TOdu9KOWCUeluCSOrQzP6RhWNSXDhlALE9ABrtGHEll1wgOFjoug2zCamzfUjD3ranxs6WHH3GTEnQLGGCMzSFgtkdNQ+LINrRslRHv31Mxdi23Hxdv4Zu4DGgjflfpwlWLkGq5H4FA9d2QRRW+R6mZJHgZXrQZ0P6NZXAEyhljCO7cTGixqoAYsFKH9oY1QyF5xxzrHDDG36YSOSzyVVtipYsLu76BJYL8UEv0inx4uV725X9u7+Mk1+pS7jdc73urm7jLznm3PPzIJ8rIlDMqyq8jllDlqWwoAZRRqieIHtYL8gy4cGEyYzI0iq0ZL+pHLIJYSrj2tx4oeQHYLcxyDAlV1up5cx8iNhMPXlPphZ5GYuiIpUIO641xHY64KBQsF0AGiw0Som+ZXS7RsWD5THPm5OdDtLep6aY0H2qIqBVqhNkxsf4sg3VlmYnRrk9GuritqwxA+PkIkscirL+i8ZYMYyU99NQBcFkFXVGiAV3Hh/ne4eHT/occjDZuT4spPEkjiWX+1uPV/6WDQ1o5c2SaNkZYQrenZSFFPsUqKIFjo9/3HtrIvU+JLBPNMkjQ4EL4zKWEJlt0TkoF2VZ3RQWBFcz8La68pYmTMLJBcFSa4sOJpzTxiy9n842WNR6Wbjn7COSJv3xsWZGB/KmuQsfj4NG9Ljzf6W5vi6Ll4Zk3Hb2UO7rH74LsgOB8ih+7oddgdXpMLfhhy4smBkZWBk40KhJcnJ9WO1LyMqoI+g0nEqpsK1lib5K7vCPPYPKcHCM8X2eXI6QqpYcJniKmT0+76WRGo/3GuXEkZaaKp2Sd7BxR8x00+XH5TV0zKtoa8Wd/gXnTRpvee/SiKeEZ2wwLDMBI8+Ly4q4EpFpfSkWOuhQ6oiipJ4JMaaSGaNopY2KPG6lWVgaIIPwRrQUlZFWMxxnxHMJdLC+E2csNT42dPiQ5UUT8I8qMQzCgeSB1cDv49yKev4/11Bo1eXire6ZkWfkpLDjJiIsEMRjSqLJGqM/QHbFSx/yx7PzojxZcPMlGRjJzw2ufFymMZNOFKEWrE2aIX3AWeqJFTRoQs8hYlnkEDvJCGIR5ECMy30SoJo1+LP+p1ho0aEI0aNGhCNb3Chg8mkaExw4GTBjSShseE8ZUhxSx5e+gxMINhezK5J6C6NGhC1qT48LrFT5GGzRSSjgkcpIHuVXpuItmAPwaUlbAArq0XoOCjmYspVw4ChaPIFa7JPGjYqj0b6NGhCa/wBP/qVkbmseybjG085x5kizA1s39fvB+TSt7vz1Y+Tro/O/BsLynJNcMPOfNkX7tY+TFRCG4sLHIe0VZ6/H5BNGsHtACirMVPwmxOXX5y0Wjoxv4SJc/u9AkXum3ybTueXgzMrS40zwuyElSysQav8AHWq2jRrcsJLQSs4jRo0amhGrO17fJu254mDCyrLkzJCjOSFDMwAuvx3o0ag8kNJCE4Nj+lOzYsWRBnxncZ45QPXLPF0Y0YDirfjl/wDvjRo0a+aPrapxxGQ525kcu5a408LbAMGg5dy//9k="
}